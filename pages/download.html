<download>
    <script execute="beforeRender">
        let deferredPrompt;

        
        window.addEventListener('beforeinstallprompt', (e) => {
            // Prevent the mini-infobar from appearing on mobile
            e.preventDefault();
            // Stash the event so it can be triggered later.
            deferredPrompt = e;
            window.deferredPrompt = deferredPrompt;
           
            // Optionally, send analytics event that PWA install promo was shown.
            console.log(`'beforeinstallprompt' event was fired.`);
        });

        window.onresize = function(event) {
            console.log(window.screen.width);
            if(window.screen.width > 768){
                setState("hello", "hello");
            }
            else{
                setState("hello", "");
            }
        };
        
    </script>
    
    #if(window.screen.width > 768); return 
     <div class="justify-center flex flex-col mx-auto h-[45vw] items-center">
        <div
            class=" bg-base-900 p-5 rounded-lg flex flex-col items-center border border-slate-300 shadow-xl rounded-lg p-2">
            <img src="/public/assets/images/download_qr.png" class="w-40">
            <div class="divider font-bold">Get The App</div>

        </div>
        </div>
        #else 
        return 
        <div class="mx-auto justify-center   h-[45vw] items-center">
            
           <div class=" bg-base-900 p-2 w-3/4 mx-auto mt-8 rounded-lg flex flex-col items-center border border-slate-300 shadow-xl rounded-lg ">
            <img src="/public/assets/images/download_qr.png" class="w-40">
            <div class="divider font-bold">
                
                 Get The App
            </div>
            <button class="btn btn-ghost btn-sm border border-slate-500  mt-2 w-full " 
            onclick="window.navigator.userAgent.toLowerCase().includes('android') ?  deferredPrompt.prompt() : iosmodal.showModal();">
                Install
            </button>
        
           
          <dialog id="iosmodal" class="modal">
            <form method="dialog" class="modal-box">
              <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">âœ•</button>
              <h3 class="font-bold text-lg flex inline gap-5">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 8.25H7.5a2.25 2.25 0 00-2.25 2.25v9a2.25 2.25 0 002.25 2.25h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25H15M9 12l3 3m0 0l3-3m-3 3V2.25" />
                  </svg>

                  Install Postr
                </h3>
                <div class="divider"></div>
                <p class="text-sm">Install postr by following these steps!</p>
                <div class="mt-5 gap-5 flex-col">
                    <p class="flex inline gap-2">1. Tap   <img src="./public/assets/images/ioshareicon.png" width="20" height="20"/></p>
                  
                    <p>  </p>
                    <p>2. Tap "Add to Home Screen"</p>
                </div>
            </form>
          </dialog>
        

      
        </div>
        
        
      
        </div>
    #endif </download>